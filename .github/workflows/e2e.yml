name: E2E Tests

#on:
#  push:
#    branches: [ master ]

on: [pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      -   uses: actions/checkout@v2

      -   name: Cache node modules
          uses: actions/cache@v1
          with:
            path: ~/.npm
            key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}
            restore-keys: |
              ${{ runner.os }}-node-

      -   name: Use Node.js ${{ matrix.node-version }}
          uses: actions/setup-node@v1
          with:
            node-version: ${{ matrix.node-version }}

#      -   name: Prepare
#          run: |
#            npm ci

      -   name: Run E2E
          run: |
            pwd
            ls -al
            ls -al .github/actions
            .github/actions/run_local_e2e.sh
